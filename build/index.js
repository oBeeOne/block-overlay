(()=>{"use strict";const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.blockEditor,l=window.wp.components,n=window.ReactJSXRuntime;(0,e.registerBlockType)("bicreactive/bloc-overlay",{edit({attributes:e,setAttributes:a}){const{position:i,top:r,right:s,bottom:d,left:c,zIndex:u,transform:b,positionPreset:g,backgroundType:h,backgroundColor:p,backgroundImage:x,backgroundVideo:m,width:v,height:C}=e,j={position:i,top:r,right:s,bottom:d,left:c,zIndex:u,transform:b,width:v,height:C};"color"===h?j.backgroundColor=p:"image"===h&&(j.backgroundImage=`url(${x})`,j.backgroundSize="cover",j.backgroundPosition="center");const k=(0,t.useBlockProps)({style:j,className:"bloc-overlay"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.InspectorControls,{children:[(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Positionnement"),initialOpen:!0,children:[(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Position rapide"),value:g,options:[{label:"Personnalisée",value:"custom"},{label:"Haut gauche",value:"top-left"},{label:"Haut centre",value:"top-center"},{label:"Centre",value:"center"},{label:"Bas droite",value:"bottom-right"}],onChange:e=>((e,o)=>{const t={"top-left":{top:"0",left:"0",right:"auto",bottom:"auto",transform:"none"},"top-center":{top:"0",left:"50%",right:"auto",bottom:"auto",transform:"translateX(-50%)"},center:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)"},"bottom-right":{top:"auto",left:"auto",right:"0",bottom:"0",transform:"none"},custom:{}}[e];t&&o({...t,positionPreset:e})})(e,a)}),(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Type de position"),value:i,options:[{label:"Relative",value:"relative"},{label:"Absolute",value:"absolute"},{label:"Fixed",value:"fixed"}],onChange:e=>a({position:e})}),(0,n.jsx)(l.TextControl,{label:"Top",value:r,onChange:e=>a({top:e})}),(0,n.jsx)(l.TextControl,{label:"Right",value:s,onChange:e=>a({right:e})}),(0,n.jsx)(l.TextControl,{label:"Bottom",value:d,onChange:e=>a({bottom:e})}),(0,n.jsx)(l.TextControl,{label:"Left",value:c,onChange:e=>a({left:e})}),(0,n.jsx)(l.RangeControl,{label:"z-index",value:u,onChange:e=>a({zIndex:e}),min:0,max:999})]}),(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Dimensions"),initialOpen:!1,children:[(0,n.jsx)(l.TextControl,{label:"Largeur (width)",value:v,onChange:e=>a({width:e}),help:"ex: auto, 100%, 300px, 80vw"}),(0,n.jsx)(l.TextControl,{label:"Hauteur (height)",value:C,onChange:e=>a({height:e}),help:"ex: auto, 100vh, 500px"})]}),(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Fond du bloc"),initialOpen:!1,children:[(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Type de fond"),value:h,options:[{label:"Aucun",value:"none"},{label:"Couleur",value:"color"},{label:"Image",value:"image"},{label:"Vidéo",value:"video"}],onChange:e=>a({backgroundType:e})}),"color"===h&&(0,n.jsx)(l.ColorPicker,{color:p,onChangeComplete:e=>a({backgroundColor:e.hex})}),"image"===h&&(0,n.jsx)(t.MediaUploadCheck,{children:(0,n.jsx)(t.MediaUpload,{onSelect:e=>a({backgroundImage:e.url}),allowedTypes:["image"],render:({open:e})=>(0,n.jsx)(l.Button,{onClick:e,isSecondary:!0,children:(0,o.__)("Choisir une image")})})}),"video"===h&&(0,n.jsx)(l.TextControl,{label:"URL de la vidéo (MP4 externe)",value:m,onChange:e=>a({backgroundVideo:e})})]})]}),(0,n.jsxs)("div",{...k,children:["video"===h&&m&&(0,n.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:-1},children:(0,n.jsx)("source",{src:m,type:"video/mp4"})}),(0,n.jsx)(t.InnerBlocks,{})]})]})},save({attributes:e}){const{position:o,top:l,right:a,bottom:i,left:r,zIndex:s,transform:d,backgroundType:c,backgroundColor:u,backgroundImage:b,backgroundVideo:g,width:h,height:p}=e,x={position:o,top:l,right:a,bottom:i,left:r,zIndex:s,transform:d,width:h,height:p};"color"===c?x.backgroundColor=u:"image"===c&&(x.backgroundImage=`url(${b})`,x.backgroundSize="cover",x.backgroundPosition="center");const m=t.useBlockProps.save({style:x,className:"bloc-overlay"});return(0,n.jsxs)("div",{...m,children:["video"===c&&g&&(0,n.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:-1},children:(0,n.jsx)("source",{src:g,type:"video/mp4"})}),(0,n.jsx)(t.InnerBlocks.Content,{})]})}})})();