(()=>{"use strict";const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.blockEditor,l=window.wp.components,n=window.ReactJSXRuntime;(0,e.registerBlockType)("bicreactive/bloc-overlay",{edit({attributes:e,setAttributes:a}){const{position:i,top:r,right:s,bottom:u,left:c,zIndex:d,transform:b,positionPreset:g,backgroundType:p,backgroundColor:h,backgroundImage:x,backgroundVideo:v,width:m,height:C,flexDirection:f,justifyContent:j,alignItems:y}=e,k={position:i,top:r,right:s,bottom:u,left:c,zIndex:d,transform:b,width:m,height:C,display:"flex",flexDirection:f,justifyContent:j,alignItems:y};"color"===p?k.backgroundColor=h:"image"===p&&(k.backgroundImage=`url(${x})`,k.backgroundSize="cover",k.backgroundPosition="center");const w=(0,t.useBlockProps)({style:k,className:"bloc-overlay"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.InspectorControls,{children:[(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Positionnement"),initialOpen:!0,children:[(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Position rapide"),value:g,options:[{label:"Personnalisée",value:"custom"},{label:"Haut gauche",value:"top-left"},{label:"Haut centre",value:"top-center"},{label:"Centre",value:"center"},{label:"Bas droite",value:"bottom-right"}],onChange:e=>((e,o)=>{const t={"top-left":{top:"0",left:"0",right:"auto",bottom:"auto",transform:"none"},"top-center":{top:"0",left:"50%",right:"auto",bottom:"auto",transform:"translateX(-50%)"},center:{top:"50%",left:"50%",right:"auto",bottom:"auto",transform:"translate(-50%, -50%)"},"bottom-right":{top:"auto",left:"auto",right:"0",bottom:"0",transform:"none"},custom:{}}[e];t&&o({...t,positionPreset:e})})(e,a)}),(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Type de position"),value:i,options:[{label:"Relative",value:"relative"},{label:"Absolute",value:"absolute"},{label:"Fixed",value:"fixed"}],onChange:e=>a({position:e})}),(0,n.jsx)(l.TextControl,{label:"Top",value:r,onChange:e=>a({top:e})}),(0,n.jsx)(l.TextControl,{label:"Right",value:s,onChange:e=>a({right:e})}),(0,n.jsx)(l.TextControl,{label:"Bottom",value:u,onChange:e=>a({bottom:e})}),(0,n.jsx)(l.TextControl,{label:"Left",value:c,onChange:e=>a({left:e})}),(0,n.jsx)(l.RangeControl,{label:"z-index",value:d,onChange:e=>a({zIndex:e}),min:0,max:999})]}),(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Dimensions"),initialOpen:!1,children:[(0,n.jsx)(l.TextControl,{label:"Largeur (width)",value:m,onChange:e=>a({width:e}),help:"ex: auto, 100%, 300px, 80vw"}),(0,n.jsx)(l.TextControl,{label:"Hauteur (height)",value:C,onChange:e=>a({height:e}),help:"ex: auto, 100vh, 500px"})]}),(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Disposition"),initialOpen:!1,children:[(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Direction"),value:f,options:[{label:"Ligne",value:"row"},{label:"Colonne",value:"column"}],onChange:e=>a({flexDirection:e})}),(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Justification (axe principal)"),value:j,options:[{label:"Début",value:"flex-start"},{label:"Centre",value:"center"},{label:"Fin",value:"flex-end"},{label:"Espacement égal",value:"space-between"},{label:"Espacement autour",value:"space-around"},{label:"Espacement uniforme",value:"space-evenly"}],onChange:e=>a({justifyContent:e})}),(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Alignement (axe secondaire)"),value:y,options:[{label:"Début",value:"flex-start"},{label:"Centre",value:"center"},{label:"Fin",value:"flex-end"},{label:"Étirement",value:"stretch"}],onChange:e=>a({alignItems:e})})]}),(0,n.jsxs)(l.PanelBody,{title:(0,o.__)("Fond du bloc"),initialOpen:!1,children:[(0,n.jsx)(l.SelectControl,{label:(0,o.__)("Type de fond"),value:p,options:[{label:"Aucun",value:"none"},{label:"Couleur",value:"color"},{label:"Image",value:"image"},{label:"Vidéo",value:"video"}],onChange:e=>a({backgroundType:e})}),"color"===p&&(0,n.jsx)(l.ColorPicker,{color:h,onChangeComplete:e=>a({backgroundColor:e.hex})}),"image"===p&&(0,n.jsx)(t.MediaUploadCheck,{children:(0,n.jsx)(t.MediaUpload,{onSelect:e=>a({backgroundImage:e.url}),allowedTypes:["image"],render:({open:e})=>(0,n.jsx)(l.Button,{onClick:e,isSecondary:!0,children:(0,o.__)("Choisir une image")})})}),"video"===p&&(0,n.jsx)(l.TextControl,{label:"URL de la vidéo (MP4 externe)",value:v,onChange:e=>a({backgroundVideo:e})})]})]}),(0,n.jsxs)("div",{...w,children:["video"===p&&v&&(0,n.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:-1},children:(0,n.jsx)("source",{src:v,type:"video/mp4"})}),(0,n.jsx)(t.InnerBlocks,{})]})]})},save({attributes:e}){const{position:o,top:l,right:a,bottom:i,left:r,zIndex:s,transform:u,backgroundType:c,backgroundColor:d,backgroundImage:b,backgroundVideo:g,width:p,height:h,flexDirection:x,justifyContent:v,alignItems:m}=e,C={position:o,top:l,right:a,bottom:i,left:r,zIndex:s,transform:u,width:p,height:h,display:"flex",flexDirection:x,justifyContent:v,alignItems:m};"color"===c?C.backgroundColor=d:"image"===c&&(C.backgroundImage=`url(${b})`,C.backgroundSize="cover",C.backgroundPosition="center");const f=t.useBlockProps.save({style:C,className:"bloc-overlay"});return(0,n.jsxs)("div",{...f,children:["video"===c&&g&&(0,n.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:-1},children:(0,n.jsx)("source",{src:g,type:"video/mp4"})}),(0,n.jsx)(t.InnerBlocks.Content,{})]})}})})();